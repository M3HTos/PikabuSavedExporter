# PikabuSavedExporter
Скрипт для экспорта сохранённого с Пикабу

## Установка

Для работы скрипта потребуется установленный Python 3.7.3(с другими не проверял. Вообще не игрался с venv раньше).  
В виртуальную среду, содержащую все нужные библиотеки, нужно прописать путь к установленному Питону:  
В файле ..\venv\pyvenv.cfg нужно указать путь в переменную "home"  
Например по умолчанию будет такой: C:\Users\"Имя пользователя"\AppData\Local\Programs\Python\Python37-32  

## Запуск

Для начала нужно сделать своё сохранённое публичным. Это делается переключением флажка "Публичная"  
Далее копируете ссылку(кнопка справа) и заносите в файл "saved_urls.json", который открывается текстовым редактором.  
Указываете название категории(имя папки, не обязательно делать как на пикабу называлось) и ссылку как в примере в этом же файле  
Если несколько категорий, то между ними ставится запятая(всё внутри фигурных скобок, они должны быть одни)  
Запускается либо с помощью батника, либо можете сами из командной строки:
	venv\Scripts\python.exe start.py \*параметры запуска 
	
Параметры запуска(без кавычек):
* "-browser ..." - выбор браузера для работы(на данный момент рабочая только лисичка)  
			Варианты: Mozilla(66 версия), Chrome(74 версия), Opera(60 версия)  
			Если у вас стоит версия новее или старее, то может не взлететь  
* "--stealth" - браузер откроется в фоновом режиме
* "--save_images" - картинки и гифки будут сохранены в папке с постом, а ссылки заменены на локальные

Если пост по какой-то причине не сохранился, его адрес будет добавлен в файл "Failed posts.txt"

## Некоторое описание(тут может быть немного на эльфийском)

Скрипт пробежится с помощью selenium по всем категориям сохранённого и составит список ссылок на посты  
Затем с помощью requests будет полученно сожержимое поста и над ним будет произведено некоторое количество  
издевательств с помощью bs4, а именно будут удалены:
* Шапка
* Сайдбар
* Футер(хз, есть ли у него норм название)
* Комменты(в дальнейшем планируется возможность их сохранения)
* История редактирования
* Схожие посты
* Еще пара лишних элементов  

При необходимости картинки и гифки будут так же сохранены в папку поста, а ссылки на них будут заменены на локальные  
Видео-плеер заменен на стандартную "шару" от ютуба. Надеюсь, кроме ютуба ничего не было(я вроде не встречал)
